{% if breadcrumbs %}
<nav aria-label="breadcrumb">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{{ url_for('data.user_data') }}">Корень</a></li>
    {% for crumb in breadcrumbs %}
      <li class="breadcrumb-item">
        <a href="{{ url_for('data.user_data', parent_id=crumb.id) }}">{{ crumb.name }}</a>
      </li>
    {% endfor %}
  </ol>
</nav>
{% endif %}

<table class="table align-middle">
  <thead>
    <tr>
      <th></th>
      <th scope="col">Название</th>
      <th scope="col">Тип</th>
      <th scope="col">Изменено</th>
      <th scope="col">Последняя тренировка</th>
      <th scope="col"></th> <!-- действия -->
    </tr>
  </thead>
  <tbody>
    {% if parent_folder_id is not none %}
      <!-- .. -->
    {% endif %}
    {% for unit in data_units %}
      <tr>
        <td>
          <i class="bi bi-{{ unit.icon }} text-warning" style="font-size: 1.5rem;"></i>
        </td>
        <td>
          {# если папка — открываем её содержимое #}
          {% if unit.type == 'папка' %}
            <a href="{{ url_for('data.user_data', parent_id=unit.id) }}">
              {{ unit.name }}
            </a>

          {# если набор пар слов — на страницу просмотра word_pairs #}
          {% elif unit.type == 'пары слов' %}
            <a href="{{ url_for('word_pairs.view_word_pair_set', set_id=unit.id) }}">
              {{ unit.name }}
            </a>

          {# если комплексные данные — на страницу просмотра complex_data #}
          {% elif unit.type == 'комплексные данные' %}
            <a href="{{ url_for('complex_data.view_complex_data', data_id=unit.id) }}">
              {{ unit.name }}
            </a>

          {% else %}
            {{ unit.name }}
          {% endif %}
        </td>
        <td>{{ unit.type }}</td>
        <td>{{ unit.updated_at.strftime('%d.%m.%Y %H:%M') }}</td>
        <td>
          {% if unit.last_training %}
            {{ unit.last_training.strftime('%d.%m.%Y %H:%M') }}
          {% endif %}
        </td>
        <td>
          <div class="dropdown">
            <button class="btn btn-sm btn-secondary dropdown-toggle" type="button"
                    id="dropdownMenuButton{{ unit.id }}"
                    data-bs-toggle="dropdown"
                    aria-expanded="false">
              …
            </button>
            <ul class="dropdown-menu" aria-labelledby="dropdownMenuButton{{ unit.id }}">
              <li>
                <button
                  class="dropdown-item"
                  type="button"
                  data-bs-toggle="modal"
                  data-bs-target="#createFolderModal"
                  data-folder-id="{{ unit.id }}"
                  data-parent-id="{{ parent_folder_id }}"
                  data-folder-name="{{ unit.name }}"
                  data-folder-comment="{{ unit.comment or '' }}"
                >
                  Редактировать папку
                </button>
              </li>
              <li>
                <form action="{{ url_for('data.delete_folder', folder_id=unit.id, parent_id=parent_folder_id) }}"
                      method="post"
                      class="m-0 p-0"
                      onsubmit="return confirm('Вы уверены, что хотите удалить папку?');">
                  <button type="submit" class="dropdown-item">Удалить папку</button>
                </form>
              </li>
            </ul>
          </div>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>

